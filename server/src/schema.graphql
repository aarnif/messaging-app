type Query {
  countDocuments: Int!
  me: User
  findUserById(id: ID!): User
  allChatsByUser(search: String): [UserChat!]!
  allContactsByUser(search: String): [Contact!]!
  nonContactUsers(search: String): [User!]!
  findChatById(id: ID!): Chat
  contactsWithoutPrivateChat(search: String): [Contact!]!
  isBlockedByUser(id: ID!): Boolean
  findContactById(id: ID!): Contact
  findPrivateChatWithContact(id: ID!): Chat
}

type User {
  id: ID!
  username: String!
  name: String
  about: String
  avatar: String
}

type UserChat {
  id: ID!
  name: String
  avatar: String
  messages: [Message]
}

type Chat {
  id: ID!
  type: String!
  name: String
  description: String
  avatar: String
  members: [ChatMember!]!
  messages: [Message]
}

type ChatMember {
  id: ID!
  username: String!
  name: String
  avatar: String
  about: String
  role: String
}

scalar Date

type Message {
  id: ID!
  sender: User
  content: String
  createdAt: Date
}

type Contact {
  id: ID!
  isBlocked: Boolean!
  contactDetails: User!
}

type Mutation {
  createUser(input: CreateUserInput!): User
  login(input: LoginInput!): Token
  addContact(id: ID!): Contact
  addContacts(ids: [ID!]!): [Contact!]!
  removeContact(id: ID!): Contact
  toggleBlockContact(id: ID!): Contact
  editProfile(input: EditProfileInput!): User
  createChat(input: CreateChatInput!): Chat
  deleteChat(id: ID!): Chat
  editChat(input: EditChatInput!): Chat
  leaveChat(id: ID!): Chat
  sendMessage(input: SendMessageInput!): Chat
}

input CreateUserInput {
  username: String!
  password: String!
  confirmPassword: String!
}

input LoginInput {
  username: String!
  password: String!
}

input EditProfileInput {
  name: String!
  about: String
}

input CreateChatInput {
  name: String
  description: String
  members: [ID!]!
  initialMessage: String!
}

input EditChatInput {
  id: ID!
  name: String!
  description: String
  members: [ID!]!
}

input SendMessageInput {
  id: ID!
  content: String!
}

type Token {
  value: String!
}
